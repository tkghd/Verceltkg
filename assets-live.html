<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Assets Dashboard - Godmode Ultra</title>
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); min-height: 100vh; }
.card { background: rgba(255,255,255,0.05); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); }
.glow { box-shadow: 0 0 30px rgba(6,182,212,0.3); }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
.pulse { animation: pulse 2s infinite; }
</style>
</head>
<body class="text-white p-4">
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;
const API_BASE = 'http://35.225.221.90:3001/api/assets';

function App() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [lastUpdate, setLastUpdate] = useState(new Date());

  const fetchData = async () => {
    try {
      const res = await fetch(`${API_BASE}/all`);
      const json = await res.json();
      setData(json);
      setLastUpdate(new Date());
    } catch (err) {
      console.error('API Error:', err);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchData();
    const interval = setInterval(fetchData, 30000); // 30ç§’ã”ã¨ã«æ›´æ–°
    return () => clearInterval(interval);
  }, []);

  if (loading) {
    return (
      <div className="flex items-center justify-center h-screen">
        <div className="text-4xl pulse">ğŸ’ Loading Assets...</div>
      </div>
    );
  }

  return (
    <div className="max-w-7xl mx-auto space-y-6">
      {/* Header */}
      <div className="card rounded-3xl p-8 glow">
        <h1 className="text-5xl font-bold mb-2 bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">
          ğŸ’ Live Assets Dashboard
        </h1>
        <div className="text-sm text-gray-400">
          æœ€çµ‚æ›´æ–°: {lastUpdate.toLocaleTimeString('ja-JP')}
          <button onClick={fetchData} className="ml-4 px-4 py-1 bg-cyan-500/20 rounded-lg hover:bg-cyan-500/30">
            ğŸ”„ æ›´æ–°
          </button>
        </div>
      </div>

      {/* Totals */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <div className="card rounded-2xl p-6">
          <div className="text-xs text-gray-400 mb-2">ã‚ªãƒ¼ãƒŠãƒ¼è³‡ç”£</div>
          <div className="text-2xl font-bold text-cyan-400">
            Â¥{parseInt(data.totals.owner_free_assets).toLocaleString()}
          </div>
        </div>
        <div className="card rounded-2xl p-6">
          <div className="text-xs text-gray-400 mb-2">æ™‚ä¾¡ç·é¡</div>
          <div className="text-2xl font-bold text-green-400">
            {parseInt(data.totals.tcap).toLocaleString()}å††
          </div>
        </div>
        <div className="card rounded-2xl p-6">
          <div className="text-xs text-gray-400 mb-2">ãƒˆãƒ¼ã‚¯ãƒ³è©•ä¾¡</div>
          <div className="text-2xl font-bold text-purple-400">
            {parseInt(data.totals.token_group).toLocaleString()}å††
          </div>
        </div>
        <div className="card rounded-2xl p-6">
          <div className="text-xs text-gray-400 mb-2">NFTä¾¡å€¤</div>
          <div className="text-2xl font-bold text-orange-400">
            Â¥{parseInt(data.totals.nft_value).toLocaleString()}
          </div>
        </div>
      </div>

      {/* Crypto Assets */}
      <div className="card rounded-2xl p-6">
        <h2 className="text-2xl font-bold mb-4 flex items-center gap-2">
          â‚¿ æš—å·è³‡ç”£
        </h2>
        <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
          {Object.entries(data.personal_wallets.crypto).map(([symbol, amount]) => (
            <div key={symbol} className="bg-white/5 rounded-xl p-4 hover:bg-white/10 transition">
              <div className="text-xs text-cyan-400 font-bold">{symbol}</div>
              <div className="text-lg font-mono">{amount.toLocaleString()}</div>
            </div>
          ))}
        </div>
      </div>

      {/* Custom Currencies */}
      <div className="card rounded-2xl p-6">
        <h2 className="text-2xl font-bold mb-4 flex items-center gap-2">
          ğŸ’ ç‹¬è‡ªé€šè²¨
        </h2>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          {data.currencies.map(curr => (
            <a key={curr.name} href={curr.url} target="_blank" rel="noopener"
               className="bg-white/5 rounded-xl p-4 hover:bg-purple-500/20 transition">
              <div className="font-bold text-purple-400">{curr.name}</div>
              <div className="text-sm text-gray-400">ä¾›çµ¦é‡: {curr.total_supply.toLocaleString()}</div>
            </a>
          ))}
        </div>
      </div>

      {/* NFTs */}
      <div className="card rounded-2xl p-6">
        <h2 className="text-2xl font-bold mb-4 flex items-center gap-2">
          ğŸ–¼ï¸ NFTã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
        </h2>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {data.nfts.map(nft => (
            <div key={nft.name} className="bg-white/5 rounded-xl p-4">
              <div className="font-bold mb-3">{nft.name}</div>
              <div className="flex gap-2">
                <a href={nft.sale_url} target="_blank" rel="noopener"
                   className="flex-1 bg-orange-500/20 hover:bg-orange-500/30 px-4 py-2 rounded-lg text-center text-sm">
                  è²©å£²
                </a>
                <a href={nft.mint_url} target="_blank" rel="noopener"
                   className="flex-1 bg-cyan-500/20 hover:bg-cyan-500/30 px-4 py-2 rounded-lg text-center text-sm">
                  Mint
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>

      {/* Corporate Accounts */}
      <div className="card rounded-2xl p-6">
        <h2 className="text-2xl font-bold mb-4 flex items-center gap-2">
          ğŸ¢ æ³•äººå£åº§
        </h2>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          {data.corporate_accounts.map(corp => (
            <div key={corp.name} className="bg-white/5 rounded-xl p-4">
              <div className="font-bold text-indigo-400 mb-2">{corp.name}</div>
              <div className="text-sm text-gray-400">
                Â¥{corp.balance_min.toLocaleString()} - Â¥{corp.balance_max.toLocaleString()}
              </div>
            </div>
          ))}
        </div>
      </div>

      {/* Fiat Wallets */}
      <div className="card rounded-2xl p-6">
        <h2 className="text-2xl font-bold mb-4">ğŸ’µ æ³•å®šé€šè²¨</h2>
        <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
          {Object.entries(data.personal_wallets.fiat).map(([currency, amount]) => (
            <div key={currency} className="bg-white/5 rounded-xl p-4">
              <div className="text-xs text-green-400 font-bold">{currency}</div>
              <div className="text-sm font-mono truncate">{amount}</div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}

ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
